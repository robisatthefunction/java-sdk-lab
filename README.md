[![Build Status](https://travis-ci.com/optimizely/java-sdk-lab.svg?token=y3xM1z7bQsqHX2NTEhps&branch=master)](https://travis-ci.com/optimizely/java-sdk-lab)
[![codecov](https://codecov.io/gh/optimizely/java-sdk-lab/branch/master/graph/badge.svg?token=WpuFvPnYuh)](https://codecov.io/gh/optimizely/java-sdk-lab)

# java-sdk-lab

Lab is meant to serve as a launch pad for experimental additions to the main line java-sdk.

# Environment Setup

## AWS Credentials
We have integrated our S3 maven repo into this project, which requires AWS credentials. There are two ways to provide
those:

- Through environment variables AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY.
- Through aws cli config file generated by 'aws configure'.

## Java SDK
This project requires Java 8. Make sure you have installed Oracle JDK 1.8 and point your JAVA_HOME to it. You can add
the following to your ~/.bash_profile

    export JAVA_HOME=`/usr/libexec/java_home -v 1.8`
    export PATH=$JAVA_HOME/bin:$PATH

# Releases
Releases are explicitly managed for this repo. The master branch should remain on SNAPSHOT versions. A release means:

- Switch to a non-SNAPSHOT version.
- Create a git tag.
- Produce a release build.

All deployments to production must be on release versions. This includes service deployments, job jar deployments, etc.
To trigger a release:

- Make sure you are on master branch and your local repo is clean.
- `./gradlew clean release -Prelease.useAutomaticVersion=true`
-- Note: you can remove the automatic versioning and will prompted as follows.
- Pick a release version. By default it's the current version without the -SNAPSHOT suffix.
- Pick a new version. By default it's an incremented version with the -SNAPSHOT suffix.

The version change and git tag is performed automatically. A Travis build will also be triggered for the release version
automatically.

# Publications
Build artifacts are published to our S3 maven repo automatically with each Travis build of the master branch.
